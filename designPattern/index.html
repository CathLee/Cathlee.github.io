<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=2"><meta name="theme-color" content="#FFF"><link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon.png"><link rel="icon" type="image/ico" sizes="32x32" href="/images/favicon.ico"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="alternate" type="application/rss+xml" title="CL&love" href="https://cathlee.github.io/rss.xml"><link rel="alternate" type="application/atom+xml" title="CL&love" href="https://cathlee.github.io/atom.xml"><link rel="alternate" type="application/json" title="CL&love" href="https://cathlee.github.io/feed.json"><link rel="stylesheet" href="//fonts.googleapis.com/css?family=Mulish:300,300italic,400,400italic,700,700italic%7CFredericka%20the%20Great:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20JP:300,300italic,400,400italic,700,700italic%7CNoto%20Serif%20SC:300,300italic,400,400italic,700,700italic%7CInconsolata:300,300italic,400,400italic,700,700italic&display=swap&subset=latin,latin-ext"><link rel="stylesheet" href="/css/app.css?v=0.2.5"><meta name="keywords" content="创建型模式"><link rel="canonical" href="https://cathlee.github.io/designPattern/"><title>设计模式之创建型模式 - 设计模式 | CLee = CL&love = 厚积而薄发，博观而约取。</title><meta name="generator" content="Hexo 5.2.0"></head><body itemscope itemtype="http://schema.org/WebPage"><div id="loading"><div class="cat"><div class="body"></div><div class="head"><div class="face"></div></div><div class="foot"><div class="tummy-end"></div><div class="bottom"></div><div class="legs left"></div><div class="legs right"></div></div><div class="paw"><div class="hands left"></div><div class="hands right"></div></div></div></div><div id="container"><header id="header" itemscope itemtype="http://schema.org/WPHeader"><div class="inner"><div id="brand"><div class="pjax"><h1 itemprop="name headline">设计模式之创建型模式</h1><div class="meta"><span class="item" title="创建时间：2021-05-18 10:39:56"><span class="icon"><i class="ic i-calendar"></i> </span><span class="text">发表于</span> <time itemprop="dateCreated datePublished" datetime="2021-05-18T10:39:56+08:00">2021-05-18</time> </span><span class="item" title="本文字数"><span class="icon"><i class="ic i-pen"></i> </span><span class="text">本文字数</span> <span>6.5k</span> <span class="text">字</span> </span><span class="item" title="阅读时长"><span class="icon"><i class="ic i-clock"></i> </span><span class="text">阅读时长</span> <span>6 分钟</span></span></div></div></div><nav id="nav"><div class="inner"><div class="toggle"><div class="lines" aria-label="切换导航栏"><span class="line"></span> <span class="line"></span> <span class="line"></span></div></div><ul class="menu"><li class="item title"><a href="/" rel="start">CLee</a></li></ul><ul class="right"><li class="item theme"><i class="ic i-sun"></i></li><li class="item search"><i class="ic i-search"></i></li></ul></div></nav></div><div id="imgs" class="pjax"><ul><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gicli3sbvtj20zk0m8x6p.jpg"></li><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gipetv6p75j20zk0m8x6p.jpg"></li><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gipey84bjtj20zk0m8hdt.jpg"></li><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1giclfw2t96j20zk0m8x6p.jpg"></li><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1giclx29mstj20zk0m8hdt.jpg"></li><li class="item" data-background-image="https://tva3.sinaimg.cn/large/6833939bly1gipevuctzzj20zk0m84qp.jpg"></li></ul></div></header><div id="waves"><svg class="waves" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 24 150 28" preserveAspectRatio="none" shape-rendering="auto"><defs><path id="gentle-wave" d="M-160 44c30 0 58-18 88-18s 58 18 88 18 58-18 88-18 58 18 88 18 v44h-352z"/></defs><g class="parallax"><use xlink:href="#gentle-wave" x="48" y="0"/><use xlink:href="#gentle-wave" x="48" y="3"/><use xlink:href="#gentle-wave" x="48" y="5"/><use xlink:href="#gentle-wave" x="48" y="7"/></g></svg></div><main><div class="inner"><div id="main" class="pjax"><div class="article wrap"><div class="breadcrumb" itemscope itemtype="https://schema.org/BreadcrumbList"><i class="ic i-home"></i> <span><a href="/">首页</a></span><i class="ic i-angle-right"></i> <span class="current" itemprop="itemListElement" itemscope itemtype="https://schema.org/ListItem"><a href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" itemprop="item" rel="index" title="分类于 设计模式"><span itemprop="name">设计模式</span></a><meta itemprop="position" content="1"></span></div><article itemscope itemtype="http://schema.org/Article" class="post block" lang="zh-CN"><link itemprop="mainEntityOfPage" href="https://cathlee.github.io/designPattern/"><span hidden itemprop="author" itemscope itemtype="http://schema.org/Person"><meta itemprop="image" content="/images/avatar.jpg"><meta itemprop="name" content="神烦大眼怪"><meta itemprop="description" content="厚积而薄发，博观而约取。, 三思而行"></span><span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization"><meta itemprop="name" content="CL&love"></span><div class="body md" itemprop="articleBody"><h3 id="1工厂模式"><a class="anchor" href="#1工厂模式">#</a> 1. 工厂模式</h3><p>简而言之，一个<strong>部门</strong>对一个<strong>产品</strong>进行包装，产品本身可由<strong>乙方</strong>进行拓展修改，<strong>甲方</strong>对<strong>部门</strong>进行通知需求调用。</p><p><strong>应用背景</strong>：对 UI 中的按钮进行工厂模式生成与应用。</p><p><img data-src="image-20210518111342848.png" alt="image-20210518111342848"></p><p><a id="more"></a></p><p><em>伪代码：</em></p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 创建者类声明的工厂方法必须返回一个产品类的对象。创建者的子类通常会提供</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// 该方法的实现。</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Dialog</span> is</pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token comment">// 创建者还可提供一些工厂方法的默认实现。</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token keyword">abstract</span> method <span class="token function">createButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token class-name">Button</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre>    <span class="token comment">// 请注意，创建者的主要职责并非是创建产品。其中通常会包含一些核心业务</span></pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token comment">// 逻辑，这些逻辑依赖于由工厂方法返回的产品对象。子类可通过重写工厂方</span></pre></td></tr><tr><td data-num="9"></td><td><pre>    <span class="token comment">// 法并使其返回不同类型的产品来间接修改业务逻辑。</span></pre></td></tr><tr><td data-num="10"></td><td><pre>    method <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span> is</pre></td></tr><tr><td data-num="11"></td><td><pre>        <span class="token comment">// 调用工厂方法创建一个产品对象。</span></pre></td></tr><tr><td data-num="12"></td><td><pre>        <span class="token class-name">Button</span> okButton <span class="token operator">=</span> <span class="token function">createButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="13"></td><td><pre>        <span class="token comment">// 现在使用产品。</span></pre></td></tr><tr><td data-num="14"></td><td><pre>        okButton<span class="token punctuation">.</span><span class="token function">onClick</span><span class="token punctuation">(</span>closeDialog<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre>        okButton<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token comment">// 具体创建者将重写工厂方法以改变其所返回的产品类型。</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">WindowsDialog</span> <span class="token keyword">extends</span> <span class="token class-name">Dialog</span> is</pre></td></tr><tr><td data-num="20"></td><td><pre>    method <span class="token function">createButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token class-name">Button</span> is</pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">WindowsButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="22"></td><td><pre></pre></td></tr><tr><td data-num="23"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">WebDialog</span> <span class="token keyword">extends</span> <span class="token class-name">Dialog</span> is</pre></td></tr><tr><td data-num="24"></td><td><pre>    method <span class="token function">createButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token class-name">Button</span> is</pre></td></tr><tr><td data-num="25"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">HTMLButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="26"></td><td><pre></pre></td></tr><tr><td data-num="27"></td><td><pre></pre></td></tr><tr><td data-num="28"></td><td><pre><span class="token comment">// 产品接口中将声明所有具体产品都必须实现的操作。</span></pre></td></tr><tr><td data-num="29"></td><td><pre><span class="token keyword">interface</span> <span class="token class-name">Button</span> is</pre></td></tr><tr><td data-num="30"></td><td><pre>    method <span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="31"></td><td><pre>    method <span class="token function">onClick</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="32"></td><td><pre></pre></td></tr><tr><td data-num="33"></td><td><pre><span class="token comment">// 具体产品需提供产品接口的各种实现。</span></pre></td></tr><tr><td data-num="34"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">WindowsButton</span> <span class="token keyword">implements</span> <span class="token class-name">Button</span> is</pre></td></tr><tr><td data-num="35"></td><td><pre>    method <span class="token function">render</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> is</pre></td></tr><tr><td data-num="36"></td><td><pre>        <span class="token comment">// 根据 Windows 样式渲染按钮。</span></pre></td></tr><tr><td data-num="37"></td><td><pre>    method <span class="token function">onClick</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span> is</pre></td></tr><tr><td data-num="38"></td><td><pre>        <span class="token comment">// 绑定本地操作系统点击事件。</span></pre></td></tr><tr><td data-num="39"></td><td><pre></pre></td></tr><tr><td data-num="40"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">HTMLButton</span> <span class="token keyword">implements</span> <span class="token class-name">Button</span> is</pre></td></tr><tr><td data-num="41"></td><td><pre>    method <span class="token function">render</span><span class="token punctuation">(</span>a<span class="token punctuation">,</span> b<span class="token punctuation">)</span> is</pre></td></tr><tr><td data-num="42"></td><td><pre>        <span class="token comment">// 返回一个按钮的 HTML 表述。</span></pre></td></tr><tr><td data-num="43"></td><td><pre>    method <span class="token function">onClick</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span> is</pre></td></tr><tr><td data-num="44"></td><td><pre>        <span class="token comment">// 绑定网络浏览器的点击事件。</span></pre></td></tr><tr><td data-num="45"></td><td><pre></pre></td></tr><tr><td data-num="46"></td><td><pre></pre></td></tr><tr><td data-num="47"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Application</span> is</pre></td></tr><tr><td data-num="48"></td><td><pre>    field dialog<span class="token operator">:</span> <span class="token class-name">Dialog</span></pre></td></tr><tr><td data-num="49"></td><td><pre></pre></td></tr><tr><td data-num="50"></td><td><pre>    <span class="token comment">// 程序根据当前配置或环境设定选择创建者的类型。</span></pre></td></tr><tr><td data-num="51"></td><td><pre>    method <span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span> is</pre></td></tr><tr><td data-num="52"></td><td><pre>        config <span class="token operator">=</span> <span class="token function">readApplicationConfigFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="53"></td><td><pre></pre></td></tr><tr><td data-num="54"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span>OS <span class="token operator">==</span> <span class="token string">"Windows"</span><span class="token punctuation">)</span> then</pre></td></tr><tr><td data-num="55"></td><td><pre>            dialog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WindowsDialog</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="56"></td><td><pre>        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span>OS <span class="token operator">==</span> <span class="token string">"Web"</span><span class="token punctuation">)</span> then</pre></td></tr><tr><td data-num="57"></td><td><pre>            dialog <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WebDialog</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="58"></td><td><pre>        <span class="token keyword">else</span></pre></td></tr><tr><td data-num="59"></td><td><pre>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string">"错误！未知的操作系统。"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="60"></td><td><pre></pre></td></tr><tr><td data-num="61"></td><td><pre>    <span class="token comment">// 当前客户端代码会与具体创建者的实例进行交互，但是必须通过其基本接口</span></pre></td></tr><tr><td data-num="62"></td><td><pre>    <span class="token comment">// 进行。只要客户端通过基本接口与创建者进行交互，你就可将任何创建者子</span></pre></td></tr><tr><td data-num="63"></td><td><pre>    <span class="token comment">// 类传递给客户端。</span></pre></td></tr><tr><td data-num="64"></td><td><pre>    method <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> is</pre></td></tr><tr><td data-num="65"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">initialize</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="66"></td><td><pre>        dialog<span class="token punctuation">.</span><span class="token function">render</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>实际代码：</p><p><span class="exturl" data-url="aHR0cHM6Ly9yZWZhY3RvcmluZ2d1cnUuY24vZGVzaWduLXBhdHRlcm5zL2ZhY3RvcnktbWV0aG9kL2phdmEvZXhhbXBsZQ==">https://refactoringguru.cn/design-patterns/factory-method/java/example</span></p><h4 id="使用场景"><a class="anchor" href="#使用场景">#</a> 使用场景</h4><ol><li>无法预知对象确切类别及其依赖关系时，可使用</li><li>希望用户能拓展你的软件库或框架的内部组件，可使用</li><li>希望服用现有对象来节省系统资源，而不是每次都重新创建，可使用</li></ol><p>优点：</p><ol><li>单一职责</li><li>开闭原则</li><li>避免创建者与具体产品之间的耦合</li></ol><p>缺点：</p><p>应用工厂方法模式需要引入许多新的子类， 代码可能会因此变得更复杂。</p><hr><h3 id="2抽象工厂模式"><a class="anchor" href="#2抽象工厂模式">#</a> 2. 抽象工厂模式</h3><p>简而言之，抽象工厂更多的是对多对多的关系。</p><p>以一个家具生产为例：</p><table><thead><tr><th>抽象工厂对象</th><th><strong>抽象工厂对象具有的方法</strong></th><th>产品</th><th>产品风格</th><th>产品对象所具有的方法</th></tr></thead><tbody><tr><td>家具生产部门</td><td>生产椅子</td><td>椅子</td><td>维多利亚风、法式、中式</td><td>sitOn</td></tr><tr><td></td><td>生产桌子</td><td>桌子</td><td>维多利亚风、法式、中式</td><td>putOn</td></tr><tr><td></td><td>生产沙发</td><td>沙发</td><td>维多利亚风、法式、中式</td><td>sitOn</td></tr></tbody></table><p>抽象工厂中的产品以及产品特点，不再是如工厂模式中一对一的特点，即一个工厂只能创建一个产品。想要实现多个产品的创建，同时对这些产品进行不同风格的改造，这就是抽象工厂模式要解决的问题。</p><p><img data-src="image-20210518205124937.png" alt="image-20210518205124937"></p><p>在上述表格中，<strong>家具部门</strong>表示一个抽象工厂，<strong>属于一个接口类</strong>，这个部门的任务分工为<strong>生产椅子</strong>、<strong>生产桌子</strong>、<strong>生产沙发</strong>。当一个<strong>客户</strong>过来告诉这个<strong>部门</strong>说：“给我做个椅子。” 此时由部门通知对应的<strong>技术人员</strong>去生产对应的家具，同时还叫<strong>包装人员</strong>对家具的风格进行改造。</p><p>每个<strong>技术人员</strong>都只能返回特定类别的产品， 例如， <code>制作现代风格的技术人员</code> <strong>Modern­Furniture­Factory</strong> 只能创建 <code>现代椅子</code> <strong>Modern­Chair</strong> 、 <code>现代沙发</code> <strong>Modern­Sofa</strong> 和 <code>现代咖啡桌</code> <strong>Modern­Coffee­Table</strong> 对象。</p><p><em><strong>注</strong></em>：</p><p>* 家具部门 ==interface 抽象工厂类</p><p>* 技术人员 == implement 家具部门接口</p><p>* 包装人员 == 对 product 进行重写</p><p><strong>应用背景：</strong></p><p><img data-src="image-20210518210246014.png" alt="image-20210518210246014"></p><p>伪代码：</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 抽象工厂接口声明了一组能返回不同抽象产品的方法。这些产品属于同一个系列</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// 且在高层主题或概念上具有相关性。同系列的产品通常能相互搭配使用。系列产</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token comment">// 品可有多个变体，但不同变体的产品不能搭配使用。</span></pre></td></tr><tr><td data-num="4"></td><td><pre><span class="token keyword">interface</span> <span class="token class-name">GUIFactory</span> is</pre></td></tr><tr><td data-num="5"></td><td><pre>    method <span class="token function">createButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token class-name">Button</span></pre></td></tr><tr><td data-num="6"></td><td><pre>    method <span class="token function">createCheckbox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token class-name">Checkbox</span></pre></td></tr><tr><td data-num="7"></td><td><pre></pre></td></tr><tr><td data-num="8"></td><td><pre></pre></td></tr><tr><td data-num="9"></td><td><pre><span class="token comment">// 具体工厂可生成属于同一变体的系列产品。工厂会确保其创建的产品能相互搭配</span></pre></td></tr><tr><td data-num="10"></td><td><pre><span class="token comment">// 使用。具体工厂方法签名会返回一个抽象产品，但在方法内部则会对具体产品进</span></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">// 行实例化。</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">WinFactory</span> <span class="token keyword">implements</span> <span class="token class-name">GUIFactory</span> is</pre></td></tr><tr><td data-num="13"></td><td><pre>    method <span class="token function">createButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token class-name">Button</span> is</pre></td></tr><tr><td data-num="14"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">WinButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    method <span class="token function">createCheckbox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token class-name">Checkbox</span> is</pre></td></tr><tr><td data-num="16"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">WinCheckbox</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre></pre></td></tr><tr><td data-num="18"></td><td><pre><span class="token comment">// 每个具体工厂中都会包含一个相应的产品变体。</span></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">MacFactory</span> <span class="token keyword">implements</span> <span class="token class-name">GUIFactory</span> is</pre></td></tr><tr><td data-num="20"></td><td><pre>    method <span class="token function">createButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token class-name">Button</span> is</pre></td></tr><tr><td data-num="21"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MacButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="22"></td><td><pre>    method <span class="token function">createCheckbox</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token class-name">Checkbox</span> is</pre></td></tr><tr><td data-num="23"></td><td><pre>        <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">MacCheckbox</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="24"></td><td><pre></pre></td></tr><tr><td data-num="25"></td><td><pre></pre></td></tr><tr><td data-num="26"></td><td><pre><span class="token comment">// 系列产品中的特定产品必须有一个基础接口。所有产品变体都必须实现这个接口。</span></pre></td></tr><tr><td data-num="27"></td><td><pre><span class="token keyword">interface</span> <span class="token class-name">Button</span> is</pre></td></tr><tr><td data-num="28"></td><td><pre>    method <span class="token function">paint</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="29"></td><td><pre></pre></td></tr><tr><td data-num="30"></td><td><pre><span class="token comment">// 具体产品由相应的具体工厂创建。</span></pre></td></tr><tr><td data-num="31"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">WinButton</span> <span class="token keyword">implements</span> <span class="token class-name">Button</span> is</pre></td></tr><tr><td data-num="32"></td><td><pre>    method <span class="token function">paint</span><span class="token punctuation">(</span><span class="token punctuation">)</span> is</pre></td></tr><tr><td data-num="33"></td><td><pre>        <span class="token comment">// 根据 Windows 样式渲染按钮。</span></pre></td></tr><tr><td data-num="34"></td><td><pre></pre></td></tr><tr><td data-num="35"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">MacButton</span> <span class="token keyword">implements</span> <span class="token class-name">Button</span> is</pre></td></tr><tr><td data-num="36"></td><td><pre>    method <span class="token function">paint</span><span class="token punctuation">(</span><span class="token punctuation">)</span> is</pre></td></tr><tr><td data-num="37"></td><td><pre>        <span class="token comment">// 根据 macOS 样式渲染按钮</span></pre></td></tr><tr><td data-num="38"></td><td><pre></pre></td></tr><tr><td data-num="39"></td><td><pre><span class="token comment">// 这是另一个产品的基础接口。所有产品都可以互动，但是只有相同具体变体的产</span></pre></td></tr><tr><td data-num="40"></td><td><pre><span class="token comment">// 品之间才能够正确地进行交互。</span></pre></td></tr><tr><td data-num="41"></td><td><pre><span class="token keyword">interface</span> <span class="token class-name">Checkbox</span> is</pre></td></tr><tr><td data-num="42"></td><td><pre>    method <span class="token function">paint</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="43"></td><td><pre></pre></td></tr><tr><td data-num="44"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">WinCheckbox</span> <span class="token keyword">implements</span> <span class="token class-name">Checkbox</span> is</pre></td></tr><tr><td data-num="45"></td><td><pre>    method <span class="token function">paint</span><span class="token punctuation">(</span><span class="token punctuation">)</span> is</pre></td></tr><tr><td data-num="46"></td><td><pre>        <span class="token comment">// 根据 Windows 样式渲染复选框。</span></pre></td></tr><tr><td data-num="47"></td><td><pre></pre></td></tr><tr><td data-num="48"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">MacCheckbox</span> <span class="token keyword">implements</span> <span class="token class-name">Checkbox</span> is</pre></td></tr><tr><td data-num="49"></td><td><pre>    method <span class="token function">paint</span><span class="token punctuation">(</span><span class="token punctuation">)</span> is</pre></td></tr><tr><td data-num="50"></td><td><pre>        <span class="token comment">// 根据 macOS 样式渲染复选框。</span></pre></td></tr><tr><td data-num="51"></td><td><pre></pre></td></tr><tr><td data-num="52"></td><td><pre><span class="token comment">// 客户端代码仅通过抽象类型（GUIFactory、Button 和 Checkbox）使用工厂</span></pre></td></tr><tr><td data-num="53"></td><td><pre><span class="token comment">// 和产品。这让你无需修改任何工厂或产品子类就能将其传递给客户端代码。</span></pre></td></tr><tr><td data-num="54"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Application</span> is</pre></td></tr><tr><td data-num="55"></td><td><pre>    <span class="token keyword">private</span> field factory<span class="token operator">:</span> <span class="token class-name">GUIFactory</span></pre></td></tr><tr><td data-num="56"></td><td><pre>    <span class="token keyword">private</span> field button<span class="token operator">:</span> <span class="token class-name">Button</span></pre></td></tr><tr><td data-num="57"></td><td><pre>    constructor <span class="token class-name">Application</span><span class="token punctuation">(</span>factory<span class="token operator">:</span> <span class="token class-name">GUIFactory</span><span class="token punctuation">)</span> is</pre></td></tr><tr><td data-num="58"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>factory <span class="token operator">=</span> factory</pre></td></tr><tr><td data-num="59"></td><td><pre>    method <span class="token function">createUI</span><span class="token punctuation">(</span><span class="token punctuation">)</span> is</pre></td></tr><tr><td data-num="60"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>button <span class="token operator">=</span> factory<span class="token punctuation">.</span><span class="token function">createButton</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="61"></td><td><pre>    method <span class="token function">paint</span><span class="token punctuation">(</span><span class="token punctuation">)</span> is</pre></td></tr><tr><td data-num="62"></td><td><pre>        button<span class="token punctuation">.</span><span class="token function">paint</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="63"></td><td><pre></pre></td></tr><tr><td data-num="64"></td><td><pre></pre></td></tr><tr><td data-num="65"></td><td><pre><span class="token comment">// 程序会根据当前配置或环境设定选择工厂类型，并在运行时创建工厂（通常在初</span></pre></td></tr><tr><td data-num="66"></td><td><pre><span class="token comment">// 始化阶段）。</span></pre></td></tr><tr><td data-num="67"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">ApplicationConfigurator</span> is</pre></td></tr><tr><td data-num="68"></td><td><pre>    method <span class="token function">main</span><span class="token punctuation">(</span><span class="token punctuation">)</span> is</pre></td></tr><tr><td data-num="69"></td><td><pre>        config <span class="token operator">=</span> <span class="token function">readApplicationConfigFile</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="70"></td><td><pre></pre></td></tr><tr><td data-num="71"></td><td><pre>        <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span>OS <span class="token operator">==</span> <span class="token string">"Windows"</span><span class="token punctuation">)</span> then</pre></td></tr><tr><td data-num="72"></td><td><pre>            factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">WinFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="73"></td><td><pre>        <span class="token keyword">else</span> <span class="token keyword">if</span> <span class="token punctuation">(</span>config<span class="token punctuation">.</span>OS <span class="token operator">==</span> <span class="token string">"Mac"</span><span class="token punctuation">)</span> then</pre></td></tr><tr><td data-num="74"></td><td><pre>            factory <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">MacFactory</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="75"></td><td><pre>        <span class="token keyword">else</span></pre></td></tr><tr><td data-num="76"></td><td><pre>            <span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Exception</span><span class="token punctuation">(</span><span class="token string">"错误！未知的操作系统。"</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="77"></td><td><pre></pre></td></tr><tr><td data-num="78"></td><td><pre>        <span class="token class-name">Application</span> app <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Application</span><span class="token punctuation">(</span>factory<span class="token punctuation">)</span></pre></td></tr></table></figure><p>实际代码：</p><p><span class="exturl" data-url="aHR0cHM6Ly9yZWZhY3RvcmluZ2d1cnUuY24vZGVzaWduLXBhdHRlcm5zL2Fic3RyYWN0LWZhY3RvcnkvamF2YS9leGFtcGxl">https://refactoringguru.cn/design-patterns/abstract-factory/java/example</span></p><h4 id="使用场景-2"><a class="anchor" href="#使用场景-2">#</a> 使用场景</h4><ol><li>代码需要与多个不同系列的相关产品进行交互，但是由于无法提前获取相关信息，或者处于对未来拓展性的考虑，你不希望代码基于产品的具体类进行构建，可使用</li><li>有一组基于抽象方法的类，且主要功能不明确，可使用</li></ol><p>优点:</p><ol><li>确保同一工厂生产的产品相互匹配</li><li>避免客户端与具体产品代码的耦合</li><li>单一职责</li><li>开闭原则</li></ol><p>缺点：由于采用该模式需要向应用中引入众多接口和类， 代码可能会比之前更加复杂。</p><hr><h3 id="3生成器模式"><a class="anchor" href="#3生成器模式">#</a> 3. 生成器模式</h3><p>简而言之，生成器模式相较于上述两种方法，多了一个管理制度 -- 即<strong>主管管理制</strong>。当<strong>客户</strong>有业务需求时，会与首先与<strong>主管</strong>进行交涉，而后，主管将<em><strong>设定好每一个阶段该做什么事情</strong></em>，<em><strong>定好项目执行流程</strong></em>，然后通知<strong>技术人员</strong>进行项目实施，最后将有<strong>技术人员</strong>返还相应的产品。</p><p>例子如下：</p><p><img data-src="image-20210518212352285.png" alt="image-20210518212352285"></p><p>伪代码：</p><figure class="highlight java"><figcaption data-lang="java"></figcaption><table><tr><td data-num="1"></td><td><pre><span class="token comment">// 只有当产品较为复杂且需要详细配置时，使用生成器模式才有意义。下面的两个</span></pre></td></tr><tr><td data-num="2"></td><td><pre><span class="token comment">// 产品尽管没有同样的接口，但却相互关联。</span></pre></td></tr><tr><td data-num="3"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Car</span> is</pre></td></tr><tr><td data-num="4"></td><td><pre>    <span class="token comment">// 一辆汽车可能配备有 GPS 设备、行车电脑和几个座位。不同型号的汽车（</span></pre></td></tr><tr><td data-num="5"></td><td><pre>    <span class="token comment">// 运动型轿车、SUV 和敞篷车）可能会安装或启用不同的功能。</span></pre></td></tr><tr><td data-num="6"></td><td><pre></pre></td></tr><tr><td data-num="7"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Manual</span> is</pre></td></tr><tr><td data-num="8"></td><td><pre>    <span class="token comment">// 用户使用手册应该根据汽车配置进行编制，并介绍汽车的所有功能。</span></pre></td></tr><tr><td data-num="9"></td><td><pre></pre></td></tr><tr><td data-num="10"></td><td><pre></pre></td></tr><tr><td data-num="11"></td><td><pre><span class="token comment">// 生成器接口声明了创建产品对象不同部件的方法。</span></pre></td></tr><tr><td data-num="12"></td><td><pre><span class="token keyword">interface</span> <span class="token class-name">Builder</span> is</pre></td></tr><tr><td data-num="13"></td><td><pre>    method <span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="14"></td><td><pre>    method <span class="token function">setSeats</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="15"></td><td><pre>    method <span class="token function">setEngine</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="16"></td><td><pre>    method <span class="token function">setTripComputer</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="17"></td><td><pre>    method <span class="token function">setGPS</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="18"></td><td><pre></pre></td></tr><tr><td data-num="19"></td><td><pre><span class="token comment">// 具体生成器类将遵循生成器接口并提供生成步骤的具体实现。你的程序中可能会</span></pre></td></tr><tr><td data-num="20"></td><td><pre><span class="token comment">// 有多个以不同方式实现的生成器变体。</span></pre></td></tr><tr><td data-num="21"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">CarBuilder</span> <span class="token keyword">implements</span> <span class="token class-name">Builder</span> is</pre></td></tr><tr><td data-num="22"></td><td><pre>    <span class="token keyword">private</span> field car<span class="token operator">:</span><span class="token class-name">Car</span></pre></td></tr><tr><td data-num="23"></td><td><pre></pre></td></tr><tr><td data-num="24"></td><td><pre>    <span class="token comment">// 一个新的生成器实例必须包含一个在后续组装过程中使用的空产品对象。</span></pre></td></tr><tr><td data-num="25"></td><td><pre>    constructor <span class="token class-name">CarBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> is</pre></td></tr><tr><td data-num="26"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="27"></td><td><pre></pre></td></tr><tr><td data-num="28"></td><td><pre>    <span class="token comment">//reset（重置）方法可清除正在生成的对象。</span></pre></td></tr><tr><td data-num="29"></td><td><pre>    method <span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span> is</pre></td></tr><tr><td data-num="30"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>car <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Car</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="31"></td><td><pre></pre></td></tr><tr><td data-num="32"></td><td><pre>    <span class="token comment">// 所有生成步骤都会与同一个产品实例进行交互。</span></pre></td></tr><tr><td data-num="33"></td><td><pre>    method <span class="token function">setSeats</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> is</pre></td></tr><tr><td data-num="34"></td><td><pre>        <span class="token comment">// 设置汽车座位的数量。</span></pre></td></tr><tr><td data-num="35"></td><td><pre></pre></td></tr><tr><td data-num="36"></td><td><pre>    method <span class="token function">setEngine</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> is</pre></td></tr><tr><td data-num="37"></td><td><pre>        <span class="token comment">// 安装指定的引擎。</span></pre></td></tr><tr><td data-num="38"></td><td><pre></pre></td></tr><tr><td data-num="39"></td><td><pre>    method <span class="token function">setTripComputer</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> is</pre></td></tr><tr><td data-num="40"></td><td><pre>        <span class="token comment">// 安装行车电脑。</span></pre></td></tr><tr><td data-num="41"></td><td><pre></pre></td></tr><tr><td data-num="42"></td><td><pre>    method <span class="token function">setGPS</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> is</pre></td></tr><tr><td data-num="43"></td><td><pre>        <span class="token comment">// 安装全球定位系统。</span></pre></td></tr><tr><td data-num="44"></td><td><pre></pre></td></tr><tr><td data-num="45"></td><td><pre>    <span class="token comment">// 具体生成器需要自行提供获取结果的方法。这是因为不同类型的生成器可能</span></pre></td></tr><tr><td data-num="46"></td><td><pre>    <span class="token comment">// 会创建不遵循相同接口的、完全不同的产品。所以也就无法在生成器接口中</span></pre></td></tr><tr><td data-num="47"></td><td><pre>    <span class="token comment">// 声明这些方法（至少在静态类型的编程语言中是这样的）。</span></pre></td></tr><tr><td data-num="48"></td><td><pre>    <span class="token comment">//</span></pre></td></tr><tr><td data-num="49"></td><td><pre>    <span class="token comment">// 通常在生成器实例将结果返回给客户端后，它们应该做好生成另一个产品的</span></pre></td></tr><tr><td data-num="50"></td><td><pre>    <span class="token comment">// 准备。因此生成器实例通常会在 `getProduct（获取产品）` 方法主体末尾</span></pre></td></tr><tr><td data-num="51"></td><td><pre>    <span class="token comment">// 调用重置方法。但是该行为并不是必需的，你也可让生成器等待客户端明确</span></pre></td></tr><tr><td data-num="52"></td><td><pre>    <span class="token comment">// 调用重置方法后再去处理之前的结果。</span></pre></td></tr><tr><td data-num="53"></td><td><pre>    method <span class="token function">getProduct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token class-name">Car</span> is</pre></td></tr><tr><td data-num="54"></td><td><pre>        product <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>car</pre></td></tr><tr><td data-num="55"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="56"></td><td><pre>        <span class="token keyword">return</span> product</pre></td></tr><tr><td data-num="57"></td><td><pre></pre></td></tr><tr><td data-num="58"></td><td><pre><span class="token comment">// 生成器与其他创建型模式的不同之处在于：它让你能创建不遵循相同接口的产品。</span></pre></td></tr><tr><td data-num="59"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">CarManualBuilder</span> <span class="token keyword">implements</span> <span class="token class-name">Builder</span> is</pre></td></tr><tr><td data-num="60"></td><td><pre>    <span class="token keyword">private</span> field manual<span class="token operator">:</span><span class="token class-name">Manual</span></pre></td></tr><tr><td data-num="61"></td><td><pre></pre></td></tr><tr><td data-num="62"></td><td><pre>    constructor <span class="token class-name">CarManualBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span> is</pre></td></tr><tr><td data-num="63"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="64"></td><td><pre></pre></td></tr><tr><td data-num="65"></td><td><pre>    method <span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span> is</pre></td></tr><tr><td data-num="66"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>manual <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Manual</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="67"></td><td><pre></pre></td></tr><tr><td data-num="68"></td><td><pre>    method <span class="token function">setSeats</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> is</pre></td></tr><tr><td data-num="69"></td><td><pre>        <span class="token comment">// 添加关于汽车座椅功能的文档。</span></pre></td></tr><tr><td data-num="70"></td><td><pre></pre></td></tr><tr><td data-num="71"></td><td><pre>    method <span class="token function">setEngine</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> is</pre></td></tr><tr><td data-num="72"></td><td><pre>        <span class="token comment">// 添加关于引擎的介绍。</span></pre></td></tr><tr><td data-num="73"></td><td><pre></pre></td></tr><tr><td data-num="74"></td><td><pre>    method <span class="token function">setTripComputer</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> is</pre></td></tr><tr><td data-num="75"></td><td><pre>        <span class="token comment">// 添加关于行车电脑的介绍。</span></pre></td></tr><tr><td data-num="76"></td><td><pre></pre></td></tr><tr><td data-num="77"></td><td><pre>    method <span class="token function">setGPS</span><span class="token punctuation">(</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">.</span><span class="token punctuation">)</span> is</pre></td></tr><tr><td data-num="78"></td><td><pre>        <span class="token comment">// 添加关于 GPS 的介绍。</span></pre></td></tr><tr><td data-num="79"></td><td><pre></pre></td></tr><tr><td data-num="80"></td><td><pre>    method <span class="token function">getProduct</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">:</span><span class="token class-name">Manual</span> is</pre></td></tr><tr><td data-num="81"></td><td><pre>        <span class="token comment">// 返回使用手册并重置生成器。</span></pre></td></tr><tr><td data-num="82"></td><td><pre></pre></td></tr><tr><td data-num="83"></td><td><pre></pre></td></tr><tr><td data-num="84"></td><td><pre><span class="token comment">// 主管只负责按照特定顺序执行生成步骤。其在根据特定步骤或配置来生成产品时</span></pre></td></tr><tr><td data-num="85"></td><td><pre><span class="token comment">// 会很有帮助。由于客户端可以直接控制生成器，所以严格意义上来说，主管类并</span></pre></td></tr><tr><td data-num="86"></td><td><pre><span class="token comment">// 不是必需的。</span></pre></td></tr><tr><td data-num="87"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Director</span> is</pre></td></tr><tr><td data-num="88"></td><td><pre>    <span class="token keyword">private</span> field builder<span class="token operator">:</span><span class="token class-name">Builder</span></pre></td></tr><tr><td data-num="89"></td><td><pre></pre></td></tr><tr><td data-num="90"></td><td><pre>    <span class="token comment">// 主管可同由客户端代码传递给自身的任何生成器实例进行交互。客户端可通</span></pre></td></tr><tr><td data-num="91"></td><td><pre>    <span class="token comment">// 过这种方式改变最新组装完毕的产品的最终类型。</span></pre></td></tr><tr><td data-num="92"></td><td><pre>    method <span class="token function">setBuilder</span><span class="token punctuation">(</span>builder<span class="token operator">:</span><span class="token class-name">Builder</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="93"></td><td><pre>        <span class="token keyword">this</span><span class="token punctuation">.</span>builder <span class="token operator">=</span> builder</pre></td></tr><tr><td data-num="94"></td><td><pre></pre></td></tr><tr><td data-num="95"></td><td><pre>    <span class="token comment">// 主管可使用同样的生成步骤创建多个产品变体。</span></pre></td></tr><tr><td data-num="96"></td><td><pre>    method <span class="token function">constructSportsCar</span><span class="token punctuation">(</span>builder<span class="token operator">:</span> <span class="token class-name">Builder</span><span class="token punctuation">)</span> is</pre></td></tr><tr><td data-num="97"></td><td><pre>        builder<span class="token punctuation">.</span><span class="token function">reset</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="98"></td><td><pre>        builder<span class="token punctuation">.</span><span class="token function">setSeats</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="99"></td><td><pre>        builder<span class="token punctuation">.</span><span class="token function">setEngine</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">SportEngine</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="100"></td><td><pre>        builder<span class="token punctuation">.</span><span class="token function">setTripComputer</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="101"></td><td><pre>        builder<span class="token punctuation">.</span><span class="token function">setGPS</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="102"></td><td><pre></pre></td></tr><tr><td data-num="103"></td><td><pre>    method <span class="token function">constructSUV</span><span class="token punctuation">(</span>builder<span class="token operator">:</span> <span class="token class-name">Builder</span><span class="token punctuation">)</span> is</pre></td></tr><tr><td data-num="104"></td><td><pre>        <span class="token comment">// ...</span></pre></td></tr><tr><td data-num="105"></td><td><pre></pre></td></tr><tr><td data-num="106"></td><td><pre></pre></td></tr><tr><td data-num="107"></td><td><pre><span class="token comment">// 客户端代码会创建生成器对象并将其传递给主管，然后执行构造过程。最终结果</span></pre></td></tr><tr><td data-num="108"></td><td><pre><span class="token comment">// 将需要从生成器对象中获取。</span></pre></td></tr><tr><td data-num="109"></td><td><pre><span class="token keyword">class</span> <span class="token class-name">Application</span> is</pre></td></tr><tr><td data-num="110"></td><td><pre></pre></td></tr><tr><td data-num="111"></td><td><pre>    method <span class="token function">makeCar</span><span class="token punctuation">(</span><span class="token punctuation">)</span> is</pre></td></tr><tr><td data-num="112"></td><td><pre>        director <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Director</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="113"></td><td><pre></pre></td></tr><tr><td data-num="114"></td><td><pre>        <span class="token class-name">CarBuilder</span> builder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CarBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="115"></td><td><pre>        director<span class="token punctuation">.</span><span class="token function">constructSportsCar</span><span class="token punctuation">(</span>builder<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="116"></td><td><pre>        <span class="token class-name">Car</span> car <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">getProduct</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="117"></td><td><pre></pre></td></tr><tr><td data-num="118"></td><td><pre>        <span class="token class-name">CarManualBuilder</span> builder <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">CarManualBuilder</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr><tr><td data-num="119"></td><td><pre>        director<span class="token punctuation">.</span><span class="token function">constructSportsCar</span><span class="token punctuation">(</span>builder<span class="token punctuation">)</span></pre></td></tr><tr><td data-num="120"></td><td><pre></pre></td></tr><tr><td data-num="121"></td><td><pre>        <span class="token comment">// 最终产品通常需要从生成器对象中获取，因为主管不知晓具体生成器和</span></pre></td></tr><tr><td data-num="122"></td><td><pre>        <span class="token comment">// 产品的存在，也不会对其产生依赖。</span></pre></td></tr><tr><td data-num="123"></td><td><pre>        <span class="token class-name">Manual</span> manual <span class="token operator">=</span> builder<span class="token punctuation">.</span><span class="token function">getProduct</span><span class="token punctuation">(</span><span class="token punctuation">)</span></pre></td></tr></table></figure><p>实际代码：</p><p><span class="exturl" data-url="aHR0cHM6Ly9yZWZhY3RvcmluZ2d1cnUuY24vZGVzaWduLXBhdHRlcm5zL2J1aWxkZXIvamF2YS9leGFtcGxl">https://refactoringguru.cn/design-patterns/builder/java/example</span></p><h4 id="使用场景-3"><a class="anchor" href="#使用场景-3">#</a> 使用场景</h4><ol><li>使用生成器构造<span class="exturl" data-url="aHR0cHM6Ly9yZWZhY3RvcmluZ2d1cnUuY24vZGVzaWduLXBhdHRlcm5zL2NvbXBvc2l0ZQ==">组合</span>树或其他复杂对象</li><li>当你希望使用代码创建不同形式的产品（例如石头或木头房屋）时，可使用生成器模式</li><li>使用生成器模式可避免 “重叠构造函数（telescopic constructor）” 的出现。</li></ol><p>优点：</p><ol><li>可以分步创建对象，暂缓创建步骤或递归创建步骤</li><li>生成不同形式产品时，可以复用相同的制造代码</li><li>单一职责</li></ol><p>缺点：</p><p>由于该模式需要新增多个类， 因此代码整体复杂程度会有所增加</p><div class="tags"><a href="/tags/%E5%88%9B%E5%BB%BA%E5%9E%8B%E6%A8%A1%E5%BC%8F/" rel="tag"><i class="ic i-tag"></i> 创建型模式</a></div></div><footer><div class="meta"><span class="item"><span class="icon"><i class="ic i-calendar-check"></i> </span><span class="text">更新于</span> <time title="修改时间：2022-03-19 15:40:35" itemprop="dateModified" datetime="2022-03-19T15:40:35+08:00">2022-03-19</time> </span><span id="designPattern/" class="item leancloud_visitors" data-flag-title="设计模式之创建型模式" title="阅读次数"><span class="icon"><i class="ic i-eye"></i> </span><span class="text">阅读次数</span> <span class="leancloud-visitors-count"></span> <span class="text">次</span></span></div><div class="reward"><button><i class="ic i-heartbeat"></i> 赞赏</button><p>请我喝[茶]~(￣▽￣)~*</p><div id="qr"><div><img data-src="/images/wechatpay.png" alt="神烦大眼怪 微信支付"><p>微信支付</p></div><div><img data-src="/images/alipay.png" alt="神烦大眼怪 支付宝"><p>支付宝</p></div><div><img data-src="/images/paypal.png" alt="神烦大眼怪 贝宝"><p>贝宝</p></div></div></div><div id="copyright"><ul><li class="author"><strong>本文作者： </strong>神烦大眼怪 <i class="ic i-at"><em>@</em></i>CL&love</li><li class="link"><strong>本文链接：</strong> <a href="https://cathlee.github.io/designPattern/" title="设计模式之创建型模式">https://cathlee.github.io/designPattern/</a></li><li class="license"><strong>版权声明： </strong>本站所有文章除特别声明外，均采用 <span class="exturl" data-url="aHR0cHM6Ly9jcmVhdGl2ZWNvbW1vbnMub3JnL2xpY2Vuc2VzL2J5LW5jLXNhLzQuMC9kZWVkLnpo"><i class="ic i-creative-commons"><em>(CC)</em></i>BY-NC-SA</span> 许可协议。转载请注明出处！</li></ul></div></footer></article></div><div class="post-nav"><div class="item left"><a href="/ajax/" itemprop="url" rel="prev" data-background-image="https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1giciukx8a7j20zk0m8aio.jpg" title="Ajax"><span class="type">上一篇</span> <span class="category"><i class="ic i-flag"></i> 误人子弟</span><h3>Ajax</h3></a></div><div class="item right"><a href="/NLP/" itemprop="url" rel="next" data-background-image="https:&#x2F;&#x2F;tva3.sinaimg.cn&#x2F;mw690&#x2F;6833939bly1giciuv0socj20zk0m8qes.jpg" title="NLP"><span class="type">下一篇</span> <span class="category"><i class="ic i-flag"></i> NLP 好奇之路</span><h3>NLP</h3></a></div></div><div class="wrap" id="comments"></div></div><div id="sidebar"><div class="inner"><div class="panels"><div class="inner"><div class="contents panel pjax" data-title="文章目录"><ol class="toc"><li class="toc-item toc-level-3"><a class="toc-link" href="#1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F"><span class="toc-number">1.</span> <span class="toc-text">1. 工厂模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF"><span class="toc-number">1.1.</span> <span class="toc-text">使用场景</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#2%E6%8A%BD%E8%B1%A1%E5%B7%A5%E5%8E%82%E6%A8%A1%E5%BC%8F"><span class="toc-number">2.</span> <span class="toc-text">2. 抽象工厂模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF-2"><span class="toc-number">2.1.</span> <span class="toc-text">使用场景</span></a></li></ol></li><li class="toc-item toc-level-3"><a class="toc-link" href="#3%E7%94%9F%E6%88%90%E5%99%A8%E6%A8%A1%E5%BC%8F"><span class="toc-number">3.</span> <span class="toc-text">3. 生成器模式</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#%E4%BD%BF%E7%94%A8%E5%9C%BA%E6%99%AF-3"><span class="toc-number">3.1.</span> <span class="toc-text">使用场景</span></a></li></ol></li></ol></div><div class="related panel pjax" data-title="系列文章"><ul><li class="active"><a href="/designPattern/" rel="bookmark" title="设计模式之创建型模式">设计模式之创建型模式</a></li><li><a href="/designCreated/" rel="bookmark" title="设计模式之创建型模式">设计模式之创建型模式</a></li><li><a href="/designStructure/" rel="bookmark" title="设计模式之结构型模式">设计模式之结构型模式</a></li></ul></div><div class="overview panel" data-title="站点概览"><div class="author" itemprop="author" itemscope itemtype="http://schema.org/Person"><img class="image" itemprop="image" alt="神烦大眼怪" data-src="/images/avatar.jpg"><p class="name" itemprop="name">神烦大眼怪</p><div class="description" itemprop="description">三思而行</div></div><nav class="state"><div class="item posts"><a href="/archives/"><span class="count">16</span> <span class="name">文章</span></a></div><div class="item categories"><a href="/categories/"><span class="count">10</span> <span class="name">分类</span></a></div><div class="item tags"><a href="/tags/"><span class="count">14</span> <span class="name">标签</span></a></div></nav><div class="social"><span class="exturl item github" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWU=" title="https:&#x2F;&#x2F;github.com&#x2F;amehime"><i class="ic i-github"></i></span> <span class="exturl item twitter" data-url="aHR0cHM6Ly90d2l0dGVyLmNvbS9hbWVoaW1l" title="https:&#x2F;&#x2F;twitter.com&#x2F;amehime"><i class="ic i-twitter"></i></span> <span class="exturl item zhihu" data-url="aHR0cHM6Ly93d3cuemhpaHUuY29tL3Blb3BsZS9ydXJpc216aw==" title="https:&#x2F;&#x2F;www.zhihu.com&#x2F;people&#x2F;rurismzk"><i class="ic i-zhihu"></i></span> <span class="exturl item music" data-url="aHR0cHM6Ly9tdXNpYy4xNjMuY29tLyMvdXNlci9ob21lP2lkPTEyODg2ODIz" title="https:&#x2F;&#x2F;music.163.com&#x2F;#&#x2F;user&#x2F;home?id&#x3D;12886823"><i class="ic i-cloud-music"></i></span> <span class="exturl item weibo" data-url="aHR0cHM6Ly93ZWliby5jb20vYW1laGltZQ==" title="https:&#x2F;&#x2F;weibo.com&#x2F;amehime"><i class="ic i-weibo"></i></span> <span class="exturl item about" data-url="aHR0cHM6Ly9hYm91dC5tZS9hbWVoaW1l" title="https:&#x2F;&#x2F;about.me&#x2F;amehime"><i class="ic i-address-card"></i></span></div><ul class="menu"><li class="item"><a href="/" rel="section"><i class="ic i-home"></i>首页</a></li><li class="item dropdown"><a href="javascript:void(0);"><i class="ic i-feather"></i>文章</a><ul class="submenu"><li class="item"><a href="/archives/" rel="section"><i class="ic i-list-alt"></i>归档</a></li><li class="item"><a href="/categories/" rel="section"><i class="ic i-th"></i>分类</a></li><li class="item"><a href="/tags/" rel="section"><i class="ic i-tags"></i>标签</a></li></ul></li><li class="item"><a href="/friends/" rel="section"><i class="ic i-heart"></i>friends</a></li></ul></div></div></div><ul id="quick"><li class="prev pjax"><a href="/ajax/" rel="prev" title="上一篇"><i class="ic i-chevron-left"></i></a></li><li class="up"><i class="ic i-arrow-up"></i></li><li class="down"><i class="ic i-arrow-down"></i></li><li class="next pjax"><a href="/NLP/" rel="next" title="下一篇"><i class="ic i-chevron-right"></i></a></li><li class="percent"></li></ul></div></div><div class="dimmer"></div></div></main><footer id="footer"><div class="inner"><div class="widgets"><div class="rpost pjax"><h2>随机文章</h2><ul><li class="item"><div class="breadcrumb"><a href="/categories/js%E5%85%AB%E8%82%A1/" title="分类于 js 八股">js 八股</a></div><span><a href="/addCurry/" title="柯里化实现add(1)(2)(3)">柯里化实现add(1)(2)(3)</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E6%89%80%E6%80%9D%E6%89%80%E6%83%B3/" title="分类于 所思所想">所思所想</a></div><span><a href="/myHeart/" title="每日恼骚">每日恼骚</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E5%AD%A6%E4%B9%A0%E4%B9%8B%E8%B7%AF/" title="分类于 学习之路">学习之路</a></div><span><a href="/%E5%A6%82%E4%BD%95%E5%9C%A8vue%E9%87%8C%E5%BC%95%E5%85%A5Bootstrap/" title="如何在vue里引入Bootstrap">如何在vue里引入Bootstrap</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E8%AF%AF%E4%BA%BA%E5%AD%90%E5%BC%9F/" title="分类于 误人子弟">误人子弟</a></div><span><a href="/ajax/" title="Ajax">Ajax</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" title="分类于 设计模式">设计模式</a></div><span><a href="/designPattern/" title="设计模式之创建型模式">设计模式之创建型模式</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E5%89%8D%E7%AB%AF%E5%B8%A6%E6%96%B0/" title="分类于 前端带新">前端带新</a></div><span><a href="/boostrap/" title="培训之路——day3">培训之路——day3</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E6%95%B0%E6%8D%AE%E7%BB%93%E6%9E%84/" title="分类于 数据结构">数据结构</a></div><span><a href="/Sort/" title="排序算法">排序算法</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E8%AE%A1%E7%AE%97%E6%9C%BA%E7%BB%84%E6%88%90%E5%8E%9F%E7%90%86/" title="分类于 计算机组成原理">计算机组成原理</a></div><span><a href="/cs/" title="计算机组成原理">计算机组成原理</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E5%AD%A6%E4%B9%A0%E4%B9%8B%E8%B7%AF/" title="分类于 学习之路">学习之路</a></div><span><a href="/vue%E5%8F%98%E5%8C%96%E4%BE%A6%E6%B5%8B/" title="vue变化侦测">vue变化侦测</a></span></li><li class="item"><div class="breadcrumb"><a href="/categories/%E8%AE%BE%E8%AE%A1%E6%A8%A1%E5%BC%8F/" title="分类于 设计模式">设计模式</a></div><span><a href="/designStructure/" title="设计模式之结构型模式">设计模式之结构型模式</a></span></li></ul></div><div><h2>最新评论</h2><ul class="leancloud-recent-comment"></ul></div></div><div class="status"><div class="copyright">&copy; 2010 – <span itemprop="copyrightYear">2022</span> <span class="with-love"><i class="ic i-sakura rotate"></i> </span><span class="author" itemprop="copyrightHolder">神烦大眼怪 @ CLee</span></div><div class="count"><span class="post-meta-item-icon"><i class="ic i-chart-area"></i> </span><span title="站点总字数">67k 字</span> <span class="post-meta-divider">|</span> <span class="post-meta-item-icon"><i class="ic i-coffee"></i> </span><span title="站点阅读时长">1:01</span></div><div class="powered-by">基于 <span class="exturl" data-url="aHR0cHM6Ly9oZXhvLmlv">Hexo</span> & Theme.<span class="exturl" data-url="aHR0cHM6Ly9naXRodWIuY29tL2FtZWhpbWUvaGV4by10aGVtZS1zaG9rYQ==">Shoka</span></div></div></div></footer></div><script data-config type="text/javascript">var LOCAL={path:"designPattern/",favicon:{show:"╰(*°▽°*)╯給俺个offer呗",hide:"(○´･д･)ﾉ憋走呜呜呜（我装的）！"},search:{placeholder:"文章搜索",empty:"关于 「 ${query} 」，什么也没搜到",stats:"${time} ms 内找到 ${hits} 条结果"},valine:!0,fancybox:!0,copyright:'复制成功，转载请遵守 <i class="ic i-creative-commons"></i>BY-NC-SA 协议。',ignores:[function(e){return e.includes("#")},function(e){return new RegExp(LOCAL.path+"$").test(e)}]}</script><script src="https://cdn.polyfill.io/v2/polyfill.js"></script><script src="//cdn.jsdelivr.net/combine/npm/pace-js@1.0.2/pace.min.js,npm/pjax@0.2.8/pjax.min.js,npm/whatwg-fetch@3.4.0/dist/fetch.umd.min.js,npm/animejs@3.2.0/lib/anime.min.js,npm/algoliasearch@4/dist/algoliasearch-lite.umd.js,npm/instantsearch.js@4/dist/instantsearch.production.min.js,npm/lozad@1/dist/lozad.min.js,npm/quicklink@2/dist/quicklink.umd.js"></script><script src="/js/app.js?v=0.2.5"></script></body></html>